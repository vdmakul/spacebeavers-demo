<!DOCTYPE html>
<html>

<head>

	<title >Sat Log</title>

	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link rel="shortcut icon" type="image/x-icon" href="docs/images/favicon.ico" />

	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css"
		integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
		crossorigin="" />
	<script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js"
		integrity="sha512-QVftwZFqvtRNi0ZyCtsznlKSWOStnDORoefr1enyq5mVL4tmKB3S/EnC3rRJcxCPavG10IcrVGSmPh6Qw5lwrg=="
		crossorigin=""></script>
	<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>

	<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD7Lmo1uTMWo9GdtGgfz3Uc3edPLCGkUMc" async
		defer></script>
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css"
		integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
		crossorigin="" />
	<script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js"
		integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA=="
		crossorigin=""></script>
	<script src='https://unpkg.com/leaflet.gridlayer.googlemutant@latest/Leaflet.GoogleMutant.js'></script>
	<script type="text/javascript"
		src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-ajax/2.1.0/leaflet.ajax.js"></script>
	<link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700" rel="stylesheet">

	<link rel="stylesheet" href="style.css">

	<!-- 1 -->
	<link title="timeline-styles" rel="stylesheet"
		href="https://cdn.knightlab.com/libs/timeline3/latest/css/timeline.css">
	<!-- 2 -->
	<script src="https://cdn.knightlab.com/libs/timeline3/latest/js/timeline.js"></script>


</head>

<body>
	<div class=card style="display:none;">
		<h3 style="margin-left:85px;">Layers</h3>
		<!-- Rounded switch -->
		<div style="margin-top:15px">
			<span class="dot" style="margin-left:15px; background-color: yellow"></span>
			<p style="display:inline-block; margin:0;padding-right: 20px;">Cadastre</p>
			<label class="switch">
				<input checked type="checkbox" onchange="hideColor('yellow')">
				<span class="slider round"></span>
			</label>
		</div>
		<div style="margin-top:15px">
			<span class="dot" style="margin-left:15px; background-color:blue"></span>
			<p style="display:inline-block; margin:0; padding-right: 20px;">Still water</p>
			<label class="switch">
				<input checked type="checkbox" onchange="hideColor('blue')">
				<span class="slider round"></span>
			</label>
		</div>
		<div style="margin-top:15px">
			<span class="dot" style="margin-left:15px; background-color:#81BEF7"></span>
			<p style="display:inline-block; margin:0; padding-right: 20px;">Rivers</p>
			<label class="switch">
				<input checked type="checkbox" onchange="hideColor('#81BEF7')">
				<span class="slider round"></span>
			</label>
		</div>
		<div style="margin-top:15px">
			<span class="dot" style="margin-left:15px; background-color:silver"></span>
			<p style="display:inline-block; margin:0; padding-right: 20px;">Roads</p>
			<label class="switch">
				<input checked type="checkbox" onchange="hideColor('silver')">
				<span class="slider round"></span>
			</label>
		</div>
	</div>

	<div class=card4 style="display:none; margin-top:210px; height: 365px; margin-left: 5px;">
		<h3 style="margin-left:80px;">Area Specs</h3>
		<div>
			<h4 style="padding-left:15px">Time in years</h4>
			<div class="slidecontainer" style="padding-left: 50px; padding-top: -50px;">
				<input type="range" min="1" max="2" value="1" id="timeRange">
				<p>Time: <span id="timeInYears"></span></p>
			</div>
		</div>
		<div>
			<h4 style="padding-left:15px">Distance in km</h4>
			<div class="slidecontainer" style="padding-left: 50px; padding-top: -50px;">
				<input type="range" min="1" max="10" value="3" id="distanceRange">
				<p>Distance: <span id="distance"></span></p>
			</div>
		</div>
		<button type="button" onclick="onSubmitClick()" style="margin-left: 27px;
				 height: 40px; 
				 width: 180px;
				 border-radius: 12px; 
				 border: 2px solid white; 
				 background: black; 
				 text-align: center;">
			<p style="margin: auto; vertical-align:middle; color: white;">Select</p>
		</button>
	</div>

	<script>
		var timeInput = document.getElementById("timeRange");
		var timeOutput = document.getElementById("timeInYears");
	
		timeOutput.innerHTML = timeInput.value;
		timeInput.oninput = function() {
			timeOutput.innerHTML = this.value;
		}
	</script>

	<script>
		var distanceInput = document.getElementById("distanceRange");
		var distanceOutput = document.getElementById("distance");
		distanceOutput.innerHTML = distanceInput.value;

		distanceInput.oninput = function() {
			distanceOutput.innerHTML = this.value;
		}
	</script>
	
	<div id="widget">
		<p style="
					color: #ddd;
    font-size: 24px;
    margin: 0;
    padding-left: 60px;
	padding-top: 20px;"> SpaceBeavers </p>


		<p style="
					color:  #ddd;
    font-size: 16px;
    margin: 0;
	margin-bottom:40px;
    padding-left: 20px;"> </p>
		<input type="text" placeholder="Search Area by ID" id="searchbox" class="input-search" />
		<div class="wrapper">
			<div class="card2">
				<button type="button" onclick="onExportClick()" class="btn">
					<img src="/images/main/export.svg" style="height: 40px;
						padding-bottom: 20px;
						margin: auto;
						display: table;" />
					<p class="card2-p">Export CSV</p>
				</button>
			</div>

			<div class="card2">
				<button type="button" onclick="onLayerClick()" class="btn">
					<img src="/images/main/layers-24px.svg" style="height: 40px;
						padding-bottom: 20px;
						margin: auto;
						display: table;" />
					<p class="card2-p">Layers</p>
				</button>
			</div>

			<div class="card2">
				<button type="button" onclick="onSelectAreaClick()" class="btn">
					<img src="/images/main/select.svg" style="height: 40px;
						padding-bottom: 20px;
						margin: auto;
						display: table;" />
					<p class="card2-p">Select Area</p>
				</button>
			</div>

			<div class="card2">
				<button type="button" onclick="onAreaClick()" class="btn">
					<img src="/images/main/specify.svg" style="height: 40px;
						padding-bottom: 20px;
						margin: auto;
						display: table;" />
					<p class="card2-p">Area specs</p>
				</button>
			</div>
		</div>
<<<<<<< HEAD
		<button type="button" onclick="onSubmitClick()" style="margin-left: 35px;
				 height: 40px; 
				 width: 180px;
				 border-radius: 12px; 
				 border: 2px solid white; 
				 background: black; 
				 text-align: center;">
			<p style="margin: auto; vertical-align:middle; color: white;">Investigate</p>
		</button>
		</button>
	</div>

	<div id='map' style='width: 100%; height:100%'></div>
	<script>
		var map = L.map('map', { zoomControl: false }).setView([58.396405 , 26.397722], 7);
		var init = false;
		var wmsLayer;


		L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
			maxZoom: 18,
			attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
				'<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
				'Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
			id: 'mapbox.light'
		}).addTo(map);

		map.on('click',
			function (e) {
				var coord = e.latlng.toString().split(',');
				var lat = coord[0].split('(');
				var lng = coord[1].split(')');
				console.log("You clicked the map at latitude: " + lat[1] + " and longitude:" + lng[0]);
			});

		var input = document.getElementById("searchbox");

		function onLayerClick() {
			if ($('.card').css('display') == 'none') {
				$('.card').show();
			} else {
				$('.card').hide();
			}
		}
		
		function onSubmitClick(){
			initialize();
		}

		function onAreaClick() {
			if ($('.card4').css('display') == 'none') {
				$('.card4').show();
			} else {
				$('.card4').hide();
			}
		}

		function hideLayer() {
			$('.card').hide();
		}

		function hideArea() {
			$('.card4').hide();
		}

		function zoom_map(lat, lon) {
			//map.setView([58.808396, 26.250682], 14);
			map.setView([lat, lon], 14);
		}

		input.addEventListener("keyup", function (event) {
			// Number 13 is the "Enter" key on the keyboard
			if (event.keyCode === 13) {
				// Cancel the default action, if needed
				event.preventDefault();
				map.setView([58.396405 , 26.397722], 14);
			}
		});

		function onEachFeature(feature, layer) {
			// does this feature have a property named popupContent?
			if (feature.properties && feature.properties.popupContent) {
				layer.bindPopup(feature.properties.popupContent);
			}
		}

		function hideGrays(){
			var show = document.getElementById("show_grays");

			if(show.checked){
				wmsLayer.addTo(map);
			} else {
				map.removeLayer(wmsLayer)
			}

		}

		function initialize() {
			if(!init)
			{
				$.getJSON("/json/DangerClass3.geojson", function (data) {
			L.geoJSON(data, {
				color: 'red',
				pane: 'top',
				style: { color: 'red', weight: 4 }
			}).addTo(map);
			});
		$.getJSON("/json/cadastre_4326.geojson", function (data) {
			L.geoJSON(data, {
				color: 'yellow',
				pane: 'bottom',
				weight: '0.2'
			}).addTo(map);
			});
		$.getJSON("/json/rivers_4326.geojson", function (data) {
			L.geoJSON(data, {
					color: '#81BEF7',
				pane: 'bottom',
				weight: '0.2'
			}).addTo(map);
		});
		$.getJSON("/json/roads_4326.geojson", function (data) {
			L.geoJSON(data, {
				color: 'silver',
				pane: 'bottom',
				weight: '0.2'
			}).addTo(map);
		});
		$.getJSON("/json/stillwater_4326.geojson", function (data) {
			L.geoJSON(data, {
				color: 'blue',
				pane: 'bottom',
				weight: '0.2'
			}).addTo(map);
		});

			}
		}

		function hideColor(color) {
			let elements = document.getElementsByClassName("leaflet-interactive");
			for (let element of elements) {
				stroke = element.getAttribute('stroke')
				if (stroke === color) {
					if (element.style.display === "") {
						element.style.display = "none";

					} else {
						element.style.display = ""
					}


				}
			}
		}
		map.createPane('bottom');
		map.createPane('top');

		var content1 = '<iframe style="width: 900px; height: 600px;border:none; position:fixed" src="popup_01.html"></iframe>';
		var custom_popup_01 = L.popup({ maxWidth: 900 }).setContent(content1);
		$.getJSON("json/wgs_not_cut_peat.json", function (data) {
			L.geoJSON(data, {
				color: 'green'
			}).addTo(map).bindPopup(custom_popup_01);
		});

		var satMutant = L.gridLayer.googleMutant({
			maxZoom: 24,
			type: 'satellite'
		}).addTo(map);

		var hybridMutant = L.gridLayer.googleMutant({
			maxZoom: 24,
			type: 'hybrid'
		});



		L.control.layers({
			Aerial: satMutant,
			Hybrid: hybridMutant,
		}, {}, {
				position: 'bottomright',
				collapsed: false
			}).addTo(map);

		L.set



	</script>

	<script>
		function preload() {
			var images = [];
			for (var i = 0; i < arguments.length; i++) {
				images[i] = new Image();
				images[i].src = preload.arguments[i];
			}
		}


		//-- usage --//
		preload(
			"/images/illustrations/10422_0428.png",
		)
	</script>

</body>

</html>