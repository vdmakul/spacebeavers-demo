<!DOCTYPE html>
<html>

<head>

	<title >Sat Log</title>

	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link rel="shortcut icon" type="image/x-icon" href="docs/images/favicon.ico" />

	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css"
		integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
		crossorigin="" />
	<script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js"
		integrity="sha512-QVftwZFqvtRNi0ZyCtsznlKSWOStnDORoefr1enyq5mVL4tmKB3S/EnC3rRJcxCPavG10IcrVGSmPh6Qw5lwrg=="
		crossorigin=""></script>
	<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>

	<script src="https://maps.googleapis.com/maps/api/js?key=MAPS_API_KEY" async
		defer></script>
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css"
		integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
		crossorigin="" />
	<script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js"
		integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA=="
		crossorigin=""></script>
	<script src='https://unpkg.com/leaflet.gridlayer.googlemutant@latest/Leaflet.GoogleMutant.js'></script>
	<script type="text/javascript"
		src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-ajax/2.1.0/leaflet.ajax.js"></script>
	<link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700" rel="stylesheet">

	<link rel="stylesheet" href="style.css">

	<!-- 1 -->
	<link title="timeline-styles" rel="stylesheet"
		href="https://cdn.knightlab.com/libs/timeline3/latest/css/timeline.css">
	<!-- 2 -->
	<script src="https://cdn.knightlab.com/libs/timeline3/latest/js/timeline.js"></script>


</head>

<body>

	<div class=card style="display:none;">
		<h3 style="margin-left:15px;">Filters</h3>
		<!-- Rounded switch -->
		<div>
			<span class="dot" style="margin-left:15px; background-color: violet"></span>
			<p style="display:inline-block; margin:0;padding-right: 20px;">Activity</p>
			<label class="switch">
				<input checked type="checkbox" onchange="hideReds()">
				<span class="slider round"></span>
			</label>
		</div>

		<div style="margin-top:15px">
			<span class="dot" style="margin-left:15px; background-color: yellow"></span>
			<p style="display:inline-block; margin:0;padding-right: 20px;">Unclear</p>
			<label class="switch">
				<input checked type="checkbox" onchange="hideYellows()">
				<span class="slider round"></span>
			</label>
		</div>
		<div style="margin-top:15px">
			<span class="dot" style="margin-left:15px; background-color:green"></span>
			<p style="display:inline-block; margin:0; padding-right: 20px;">No Activity</p>
			<label class="switch">
				<input checked type="checkbox" onchange="hideGreens()">
				<span class="slider round"></span>
			</label>
		</div>

		<div style="margin-top:15px">
			<span class="dot" style="margin-left:15px; background-color:rgb(192,192,192)"></span>
			<p style="display:inline-block; margin:0; padding-right: 20px;">Natural Bogs</p>
			<label class="switch">
				<input disabled type="checkbox" id="show_grays" onchange="hideGrays()">
				<span class="slider round"></span>
			</label>
		</div>

	</div>

	<div class="card3" id="warningCard
	">
		<div class="warnings">
			<h3 style="display:inline-block">Alerts</h3>
		</div>
		<div style="font-size:14px;">
			<a href="#" style="text-decoration:none; color: white">
				<p class="attention-label" onclick="zoom_map(58.330269, 26.251059)">Attention 1 </p>
				<hr style="opacity: 0.4;">
				<p class="attention-label"></p>
				<hr style="opacity: 0.4;">
				<p class="attention-label"></p>
				<hr style="opacity: 0.4;">
				<p class="attention-label" >Attention 4 </p>
				<hr style="opacity: 0.4;">
				<p class="attention-label" >Attention 5 </p>
				<hr style="opacity: 0.4;">
				<p class="attention-label" >Attention 6 </p>
			</a>
		</div>
	</div>

	<div id="widget">
		<img src="/images/main/satellite_white.png" style="width: 200px; left: 25px; position: relative;" onclick="map.setView([58.744355, 25.628880], 7);" />
		<img src="/images/main/sat_logo.png"  onclick="map.setView([58.744355, 25.628880], 7);" />

		<p style="
					color: #ddd;
    font-size: 24px;
    margin: 0;
    padding-left: 33px;"> Estonia </p>


		<p style="
					color:  #ddd;
    font-size: 16px;
    margin: 0;
	margin-bottom:40px;
    padding-left: 20px;"> </p>
		<input type="text" placeholder="Search Area by ID" id="searchbox" class="input-search" />
		<div class="wrapper">

			<div class="card2">
				<button type="button" onclick="onAlertClick()" class="btn">
					<img src="/images/main/bell.svg" style="height: 40px;
						padding-bottom:20px;
						margin: auto;
						display: table;" />
					<p class="card2-p">Alerts</p>
				</button>
			</div>


			<div class="card2">
				<img src="/images/main/file-alt.svg" style="height: 40px;
				padding-bottom:20px;
				margin: auto;
				display: table;" />
				<p class="card2-p">Reports</p>
			</div>

			<div class="card2">
				<img src="/images/main/envelope.svg" style="height: 40px;
				padding-bottom:20px;
				margin: auto;
				display: table;" />
				<p class="card2-p">Messages</p>
			</div>

			<div class="card2">
				<button type="button" onclick="onFilterClick()" class="btn">
					<img src="/images/main/filter.svg" style="height: 40px;
						padding-bottom:20px;
						margin: auto;
						display: table;" />
					<p class="card2-p">Filters</p>
				</button>
			</div>
		</div>


		<div class="logout">
			<p style="text-align:center; color:white">Logout</p>
		</div>

	</div>

	<div id='map' style='width: 100%; height:100%'></div>
	<script>
		var map = L.map('map', { zoomControl: false }).setView([58.744355, 25.628880], 7);
		var wmsLayer;


		L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
			maxZoom: 18,
			attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
				'<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
				'Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
			id: 'mapbox.light'
		}).addTo(map);

		map.on('click',
			function (e) {
				var coord = e.latlng.toString().split(',');
				var lat = coord[0].split('(');
				var lng = coord[1].split(')');
				console.log("You clicked the map at latitude: " + lat[1] + " and longitude:" + lng[0]);
			});

		var input = document.getElementById("searchbox");

		function onAlertClick() {
			if ($('.card3').css('display') == 'none') {
				$('.card3').show();
			} else {
				$('.card3').hide();
			}
		}
		function onFilterClick() {
			if ($('.card').css('display') == 'none') {
				$('.card').show();
			} else {
				$('.card').hide();
			}
		}
		function hideFilters() {
			$('.card').hide();
		}

		function hideWarnings() {
			$('.card3').hide();
		}

		function zoom_map(lat, lon) {
			//map.setView([58.808396, 26.250682], 14);
			map.setView([lat, lon], 14);
		}

		function onWarningClose() {
			$(".card3").hide();
		}

		input.addEventListener("keyup", function (event) {
			// Number 13 is the "Enter" key on the keyboard
			if (event.keyCode === 13) {
				// Cancel the default action, if needed
				event.preventDefault();
				map.setView([58.808396, 26.250682], 14);
			}
		});

		function onEachFeature(feature, layer) {
			// does this feature have a property named popupContent?
			if (feature.properties && feature.properties.popupContent) {
				layer.bindPopup(feature.properties.popupContent);
			}
		}

		function hideGrays(){
			var show = document.getElementById("show_grays");

			if(show.checked){
				wmsLayer.addTo(map);
			} else {
				map.removeLayer(wmsLayer)
			}

		}



		function hideYellows() {
			let elements = document.getElementsByClassName("leaflet-interactive");
			for (let element of elements) {
				stroke = element.getAttribute('stroke')
				if (stroke === "yellow") {
					if (element.style.display === "") {
						element.style.display = "none";

					} else {
						element.style.display = ""
					}


				}
			}
		}

		function hideReds() {
			let elements = document.getElementsByClassName("leaflet-interactive");
			for (let element of elements) {
				stroke = element.getAttribute('stroke')
				if (stroke === "violet") {
					if (element.style.display === "") {
						element.style.display = "none";

					} else {
						element.style.display = ""
					}


				}
			}
		}

		function hideGreens() {
			let elements = document.getElementsByClassName("leaflet-interactive");
			for (let element of elements) {
				stroke = element.getAttribute('stroke')
				if (stroke === "green") {
					if (element.style.display === "") {
						element.style.display = "none";

					} else {
						element.style.display = ""
					}


				}
			}
		}

		$.getJSON("/json/wgs84_3.json", function (data) {
			L.geoJSON(data, {
				color: 'violet'
			}).addTo(map);
		});


		$.getJSON("/json/wgs_cut_19_2509.json", function (data) {
			L.geoJSON(data, {
				color: 'violet'
			}).addTo(map);
		});


		$.getJSON("/json/wgs_confused.json", function (data) {
			L.geoJSON(data, {
				color: 'yellow'
			}).addTo(map);
		});

		var custom_popup_04 = L.popup({ maxWidth: 800 }).setContent('<iframe style="width: 800px; height: 400px;border:none;" src="popup_04.html"></iframe>');
		$.getJSON("/json/the_bog.json", function (data) {
			L.geoJSON(data, {
				color: 'yellow'
			}).addTo(map).bindPopup(custom_popup_04);
		});


		var content1 = '<iframe style="width: 900px; height: 600px;border:none;" src="popup_01.html"></iframe>';
		var custom_popup_01 = L.popup({ maxWidth: 900 }).setContent(content1);
		$.getJSON("json/wgs_not_cut_peat.json", function (data) {
			L.geoJSON(data, {
				color: 'green'
			}).addTo(map).bindPopup(custom_popup_01);
		});

		var satMutant = L.gridLayer.googleMutant({
			maxZoom: 24,
			type: 'satellite'
		}).addTo(map);

		var hybridMutant = L.gridLayer.googleMutant({
			maxZoom: 24,
			type: 'hybrid'
		});



		L.control.layers({
			Aerial: satMutant,
			Hybrid: hybridMutant,
		}, {}, {
				position: 'bottomright',
				collapsed: false
			}).addTo(map);

		L.set

		var myIcon1 = L.icon({
			iconUrl: '/images/main/the-mark.png',
			iconSize: [32, 32],
			iconAnchor: [16, 16], // point of the icon which will correspond to marker's location

		});

		var myIcon2 = L.icon({
			iconUrl: '/images/main/the-mark.png',
			iconSize: [32, 32],
			iconAnchor: [16, 16], // point of the icon which will correspond to marker's location

		});

		var myIcon3 = L.icon({
			iconUrl: '/images/main/the-mark.png',
			iconSize: [32, 32],
			iconAnchor: [16, 16], // point of the icon which will correspond to marker's location

		});
		var content2 = '<iframe style="width: 700px; height: 500px;border:none;" src="popup_02.html"></iframe>';
		var content3 = '<iframe style="width: 900px; height: 600px;border:none;" src="popup_03.html"></iframe>';
		var custom_popup_02 = L.popup({ maxWidth: 700 }).setContent(content2);
		var custom_popup_03 = L.popup({ maxWidth: 900 }).setContent(content3);

		;

		var marker_01 = L.marker([58.330269, 26.251059], { icon: myIcon1 }).addTo(map);
		marker_01.bindPopup(custom_popup_01);
		marker_01.on('click', hideFilters);
		marker_01.on('click', hideWarnings);
		

	</script>

	<script>
		function preload() {
			var images = [];
			for (var i = 0; i < arguments.length; i++) {
				images[i] = new Image();
				images[i].src = preload.arguments[i];
			}
		}

		//-- usage --//
		preload(
			"/images/bmp/0109_0709.bmp",
			"/images/bmp/06Nov2018_12Nov2018_warning.bmp",
			"/images/bmp/0709_1309.bmp",
			"/images/bmp/1309_1909.bmp",
			"/images/bmp/13Oct2018_19Oct2018_warning.bmp",
			"/images/bmp/1909_2509.bmp",
			"/images/bmp/2509_0110.bmp",
		)
	</script>
</body>

</html>
